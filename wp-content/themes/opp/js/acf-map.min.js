!function(a){function b(b,e){var f=b.find(".marker"),g={zoom:16,center:new google.maps.LatLng(71.491368,22.180832),mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:b.hasClass("scrollable"),styles:[{stylers:[{visibility:"simplified"}]},{elementType:"labels",stylers:[{visibility:"off"}]}]},h=new google.maps.Map(b[0],g);return h.markers=[],f.each(function(){c(a(this),h,e)}),d(h),h}function c(b,c,d){var e=new google.maps.LatLng(b.attr("data-lat"),b.attr("data-lng")),f=b.hasClass("current")?"#57025b":"#7a7979",g=new Marker({position:e,map:c,icon:{path:MAP_PIN,fillColor:f,fillOpacity:.9,strokeColor:"",strokeWeight:0},map_icon_label:'<span class="map-icon map-icon-compass"></span>'});if(d&&(g.address=b.attr("data-address"),g.posts=jQuery.parseJSON(b.attr("data-posts"))),c.markers.push(g),b.html()){var h=new google.maps.InfoWindow({content:b.html()});google.maps.event.addListener(g,"click",function(){if(h.open(c,g),d){d.close();var b=g.posts.gallery.length,e=g.posts.expedition.length,f=b+e;f>1&&(a(".spinner").css("opacity",.8),jQuery.post(ajaxurl,{action:"map_marker_posts",posts:g.posts,address:g.address},function(b){a("#map-side-panel .posts").html(b),d.open(),a(".spinner").css("opacity",0)}))}}),b.hasClass("current")&&h.open(c,g)}}function d(b){var c=new google.maps.LatLngBounds;a.each(b.markers,function(a,b){var d=new google.maps.LatLng(b.position.lat(),b.position.lng());c.extend(d)}),1==b.markers.length?b.setZoom(2):b.fitBounds(c)}var e=null,f=null;a(document).ready(function(){a("body").hasClass("page-template-page-map")&&(f=new Panel({panel:"#map-side-panel",type:"slide-left",maskId:!1})),a(".acf-map").each(function(){e=b(a(this),f)})})}(jQuery);